---
apiVersion: cluster.x-k8s.io/v1beta1
kind: Cluster
metadata:
  name: test-kapp-controller-1
  namespace: default
  labels:
    tkg.tanzu.vmware.com/cluster-name: test-kapp-controller-1
    tanzuKubernetesRelease: v1.22.5
spec:
  clusterNetwork:
    pods:
      cidrBlocks:
        - 100.96.0.0/11
    services:
      cidrBlocks:
        - 100.64.0.0/13
  topology:
    class: test-clusterclass-tcbt
    version: v1.22.5
    variables:
      - name: TKG_HTTP_PROXY
        value: "foo.com"
      - name: TKG_HTTPS_PROXY
        value: "bar.com"
      - name: TKG_NO_PROXY
        value: "foobar.com"
      - name: TKG_PROXY_CA_CERT
        value: "dummyCertificate"
      - name: TKG_IP_FAMILY
        value: "ipv4"
---
apiVersion: run.tanzu.vmware.com/v1alpha3
kind: TanzuKubernetesRelease
metadata:
  name: v1.22.5
spec:
  version: v1.22.5
  kubernetes:
    version: v1.22.5
    imageRepository: foo
  osImages: []
  bootstrapPackages: []
---
apiVersion: run.tanzu.vmware.com/v1alpha3
kind: ClusterBootstrapTemplate
metadata:
  name: v1.22.5
  namespace: tkg-system
spec:
  additionalPackages: []
---
apiVersion: run.tanzu.vmware.com/v1alpha3
kind: KappControllerConfig
metadata:
  name: test-kapp-controller-1
  namespace: default
spec:
  namespace: test-ns
  kappController:
    createNamespace: true
    globalNamespace: tanzu-package-repo-global
    deployment:
      concurrency: 4
      hostNetwork: true
      priorityClassName: system-cluster-critical
      apiPort: 10100
      metricsBindAddress: "0"
      tolerations:
        - key: CriticalAddonsOnly
          operator: Exists
        - effect: NoSchedule
          key: node-role.kubernetes.io/master
        - effect: NoSchedule
          key: node.kubernetes.io/not-ready
        - effect: NoSchedule
          key: node.cloudprovider.kubernetes.io/uninitialized
          value: "true"
